webpackJsonp([1],{0:function(t,e,n){n("j1ja"),t.exports=n("NHnr")},"0s+B":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"v-breadcrumb-com"},[t.hasEvt?[n("a",{attrs:{href:"/"},on:{click:function(e){e.preventDefault(),t.breadcrumb_c("/")}}},[t._v(".")]),t._v(" "),t._l(t.hrefArr,function(e){return n("a",{attrs:{href:e.path},on:{click:function(n){n.preventDefault(),t.breadcrumb_c(e.path)}}},[t._v(t._s(e.name))])})]:[n("a",{attrs:{href:"/"}},[t._v(".")]),t._v(" "),t._l(t.hrefArr,function(e){return n("a",{attrs:{href:e.path}},[t._v(t._s(e.name))])})]],2)},r=[],o={render:i,staticRenderFns:r};e.a=o},"69Oj":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],ref:"contextMenu"},[n("VContextMenusBody",{ref:"contextmenu",attrs:{menus:t.menus}})],1)},r=[],o={render:i,staticRenderFns:r};e.a=o},"7Otq":function(t,e,n){t.exports=n.p+"contents/img/logo.82b9c7a.png"},AEMz:function(t,e,n){"use strict";var i=n("W3Iv"),r=n.n(i),o=n("d7EF"),s=n.n(o),a=n("BO1k"),c=n.n(a),u={};e.a={name:"v-contextmenus-body",props:["menus"],data:function(){return{openMenu:null,lazyShow:null}},beforeCreate:function(){u=this.$store},methods:{contextmenuMouseOverFun:function(t,e){var n=this,i=this.menus.inner[t],r=e.target;e.target&&(r=r.getBoundingClientRect(),this.hideOpenMenu(),i.hasOwnProperty("children")&&(this.openMenu=i.children.state,this.$set(this.openMenu,"show",!0),this.$nextTick(function(){var t=e.target.nextElementSibling.querySelector("ul"),i=t.getBoundingClientRect(),o=0,s=0;o=window.innerHeight<r.top+i.height?window.innerHeight-i.height:r.top,s=window.innerWidth<r.left+r.width+i.width?window.innerWidth-i.width:r.left+r.width,n.$set(n.openMenu,"position",{top:o,left:s})})))},contextmenuMouseOverLazy:function(t,e){var n=this;clearTimeout(this.lazyShow),this.lazyShow=setTimeout(function(){n.contextmenuMouseOverFun(t,e)},100)},contextmenuClick:function(t,e,n){n&&n()},hideOpenMenu:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"one",e=function(t){var e=!0,i=!1,r=void 0;try{for(var o,s=c()(t);!(e=(o=s.next()).done);e=!0){var a=o.value;a.children&&(a.children=n(a.children))}}catch(t){i=!0,r=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw r}}return t},n=function(t){var n=!0,i=!1,o=void 0;try{for(var a,u=c()(r()(t));!(n=(a=u.next()).done);n=!0){var l=a.value,h=s()(l,2),f=h[0],d=h[1];"inner"===f&&(d=e(d)),"state"===f&&(t.state.show=!1)}}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return t};this.openMenu&&("all"===t?this.menus=n(this.menus):this.$set(this.openMenu,"show",!1))}}}},AZrw:function(t,e,n){"use strict";function i(t){n("nnVg")}var r=n("yUll"),o=n("0s+B"),s=n("VU/8"),a=i,c=s(r.a,o.a,!1,a,null,null);e.a=c.exports},EMKr:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("img",{attrs:{src:n("7Otq")}}),t._v(" "),i("h1",[t._v(t._s(t.msg))])])},r=[],o={render:i,staticRenderFns:r};e.a=o},FP3a:function(t,e,n){"use strict";function i(t){n("Vke7")}var r=n("XQ5R"),o=n("K5mH"),s=n("VU/8"),a=i,c=s(r.a,o.a,!1,a,"data-v-93a0afae",null);e.a=c.exports},GTpV:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"contextmenu-body-mod"},[t.menus.state&&t.menus.state.show?[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.menus.state.show,expression:"menus.state.show"}],style:{top:t.menus.state.position.top+"px",left:t.menus.state.position.left+"px"}},t._l(t.menus.inner,function(e,i){return n("li",["title"in e?n("div",{key:i,class:{noEvt:e.disabled},on:{mouseover:function(e){t.contextmenuMouseOverLazy(i,e)},click:function(n){t.contextmenuClick(i,n,e.evt)}}},[t._v("\n\t\t\t\t"+t._s(e.title)+"\n\n\t\t\t\t"),e.children?n("i"):t._e()]):"type"in e?n("div",{key:i,staticClass:"separator"}):t._e(),t._v(" "),e.children?[n("v-contextmenus-body",{attrs:{menus:e.children}})]:t._e()],2)}))]:t._e()],2)},r=[],o={render:i,staticRenderFns:r};e.a=o},H3Ql:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],o={render:i,staticRenderFns:r};e.a=o},K5mH:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"main-app"},[n("header",[n("h1",{on:{click:function(e){t.getFiles_c("../",e)}}},[t._v("\n\t\t\t"+t._s(t.title)+"\n\t\t")])]),t._v(" "),n("main",[n("VBreadcrumb",{ref:"vbreadcrumb",on:{sendBreadCrumbEvt:t.emitBreadCrumbEvt}}),t._v(" "),n("ul",t._l(t.files,function(e){return n("li",[e.isDir?e.isDir?n("svg",{attrs:{"aria-hidden":"true",height:"16",version:"1.1",viewBox:"0 0 14 16",width:"14"}},[n("path",{attrs:{d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}})]):t._e():n("svg",{attrs:{"aria-hidden":"true",height:"16",version:"1.1",viewBox:"0 0 12 16",width:"14"}},[n("path",{attrs:{d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}})]),t._v(" "),e.isDir?n("a",{attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.getFiles_c(e,n)},contextmenu:function(n){n.preventDefault(),t.rightMenu(e,n)}}},[t._v("\n\t\t\t\t\t"+t._s(e.file)+"\n\t\t\t\t")]):t._e(),t._v(" "),e.isDir?t._e():n("a",{attrs:{target:"_blank",href:"./"+e.file},on:{click:function(n){if(!n.shiftKey)return null;n.preventDefault(),t.askServerOpenDir(e)},contextmenu:function(n){n.preventDefault(),t.rightMenu(e,n)}}},[t._v(t._s(e.file))])])})),t._v(" "),n("p",[t._v("共有 "+t._s(t.files.length)+" 个文件")]),t._v(" "),n("VContextmenus")],1)])},r=[],o={render:i,staticRenderFns:r};e.a=o},LmYg:function(t,e,n){"use strict";function i(t){n("so7B")}var r=n("AEMz"),o=n("GTpV"),s=n("VU/8"),a=i,c=s(r.a,o.a,!1,a,"data-v-3bbe2824",null);e.a=c.exports},M93x:function(t,e,n){"use strict";function i(t){n("TcwN")}var r=n("xJD8"),o=n("H3Ql"),s=n("VU/8"),a=i,c=s(r.a,o.a,!1,a,"data-v-75ad56d8",null);e.a=c.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("fZjL"),r=n.n(i),o=n("7+uW"),s=n("NYxO"),a=n("M93x"),c=n("YaEn"),u=n("mtWM"),l=n.n(u);o.a.config.productionTip=!1,o.a.prototype.axios=l.a,o.a.use(s.a);var h=new s.a.Store({state:{},mutations:{setContextmenu:function(t,e){r()(e).length>1?t.contextmenu=e:t.contextmenu.show=e.show}}});new o.a({el:"#app",router:c.a,store:h,template:"<App/>",components:{App:a.a}})},TcwN:function(t,e){},UuJB:function(t,e,n){"use strict";var i=n("nEnw"),r=n("69Oj"),o=n("VU/8"),s=o(i.a,r.a,!1,null,null,null);e.a=s.exports},Vke7:function(t,e){},XQ5R:function(t,e,n){"use strict";var i=n("usrL");e.a=i.a},YaEn:function(t,e,n){"use strict";var i=n("7+uW"),r=n("/ocq"),o=n("qSdX"),s=n("FP3a");i.a.use(r.a),e.a=new r.a({mode:"history",routes:[{path:"/",name:"",component:s.a,children:[{path:"*",name:"Hello",component:o.a}]}]})},nEnw:function(t,e,n){"use strict";var i=n("LmYg"),r={};e.a={name:"v-contextmenus",components:{VContextMenusBody:i.a},data:function(){return{}},computed:{menus:function(){return this.$store.state.contextmenu.data},showMenu:function(){return r.state.contextmenu.show}},watch:{menus:function(t,e){this.$refs.contextmenu.hideOpenMenu("all"),r.state.contextmenu.evt&&this.show(t,r.state.contextmenu.evt)}},methods:{getPosition:function(t){var e=this,n={position:{left:t.clientX,top:t.clientY},show:!0};return this.$nextTick(function(){var t=e.$el.querySelector("ul"),i=t.scrollHeight,r=t.scrollWidth;window.innerHeight<n.position.top+i&&(n.position.top=window.innerHeight-i),window.innerWidth<n.position.left+r&&(n.position.left=window.innerWidth-r)}),n},show:function(t,e){var n=this.getPosition(e);!function t(e){return Array.isArray(e)&&e.forEach(function(e,n){e.hasOwnProperty("children")&&(e.children.hasOwnProperty("inner")||(e.children=t(e.children)))}),{inner:e,state:{show:!1,position:{top:0,left:0}}}}(t),r.commit("setContextmenu",{show:!0,data:{state:n,inner:t},evt:null})},documentClick:function(t){var e=this.$refs.contextMenu,n=t.target;e===n||e.contains(n)||(r.commit("setContextmenu",{show:!1}),this.$refs.contextmenu.hideOpenMenu("all"))}},beforeCreate:function(){r=this.$store,this.$set(r.state,"contextmenu",{show:!0,data:{},evt:null})},created:function(){document.addEventListener("click",this.documentClick)},destroyed:function(){document.removeEventListener("click",this.documentClick)}}},nnVg:function(t,e){},pMZz:function(t,e,n){"use strict";var i=n("mtWM"),r=n.n(i);e.a={name:"hello",data:function(){return{msg:""}},created:function(){var t=this;this.msg="vue is created!";var e=localStorage.SERVER_ENV?"/api/demo/helloworld.json":"/api/demo/helloworld";r.a.get(e).then(function(e){console.log(e),t.msg=e.data.data.name}).catch(function(t){console.log(t)})}}},qSdX:function(t,e,n){"use strict";function i(t){n("vNlK")}var r=n("pMZz"),o=n("EMKr"),s=n("VU/8"),a=i,c=s(r.a,o.a,!1,a,"data-v-7f7410aa",null);e.a=c.exports},so7B:function(t,e){},usrL:function(t,e,n){"use strict";var i=n("AZrw"),r=n("UuJB");e.a={name:"home",components:{VBreadcrumb:i.a,VContextmenus:r.a},data:function(){return{title:"",files:[]}},created:function(){var t=this;this.refreshFilesList(location.pathname),history.pushState?window.addEventListener("popstate",function(e){t.refreshFilesList(location.pathname)},!1):console.warn("您的浏览器不支持 History API，请升级您的浏览器！")},methods:{getFiles_c:function(t,e){var n="";if(e.shiftKey)return void this.askServerOpenDir(t);n="../"===t?""+location.pathname.split("/").slice(0,-2).join("/"):location.pathname+t.file,this.refreshFilesList(n),this.$refs.vbreadcrumb.update()},refreshFilesList:function(t){var e=this;t=t.endsWith("/")?t:t+"/";var n=decodeURI(t).split("/").slice(-2).shift();this.$router.push(t),this.title=n||"iTools",document.title=this.title,t="/api"+t,this.axios.get(t).then(function(t){e.files=t.data}).catch(function(t){console.error(t)})},emitBreadCrumbEvt:function(t){this.refreshFilesList(t.url)},askServerOpenDir:function(t){console.log("will do open dir",t),this.axios.post("/api/opendir",{path:t.path,name:t.file}).then(function(t){console.log(t)}).catch(function(t){console.error(t)})},rightMenu:function(t,e){var n=this;n.$store.commit("setContextmenu",{data:[{title:"在系统中打开",evt:function(){n.askServerOpenDir(t),n.$store.commit("setContextmenu",{show:!1})}},{type:"separator"},{title:"重命名",disabled:!0},{title:"下载",disabled:!0},{type:"separator"},{disabled:!0,title:"删除"}],evt:e})}}}},vNlK:function(t,e){},xJD8:function(t,e,n){"use strict";e.a={name:"app"}},yUll:function(t,e,n){"use strict";var i=n("fZjL"),r=n.n(i);e.a={name:"v-breadcrumb",data:function(){return{hrefArr:[],hasEvt:!1}},created:function(){var t=this;this.formatURL(location.pathname),this.hasEvt=r()(this.$listeners).length>0,history.pushState&&this.hasEvt&&window.addEventListener("popstate",function(e){t.formatURL(location.pathname)},!1)},methods:{breadcrumb_c:function(t){this.formatURL(t),this.hasEvt&&this.$emit("sendBreadCrumbEvt",{url:t})},formatURL:function(t){var e=this,n=decodeURI(t).slice(1,-1).split("/");e.hrefArr=[],n.forEach(function(t,n,i){e.hrefArr.push({name:t,path:"/"+i.slice(0,n+1).join("/")+"/"})})},update:function(){this.formatURL(location.pathname)}}}}},[0]);
//# sourceMappingURL=app.b4f3863b3bbfbf1b5c12.js.map