(function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],u=0,f=[];u<s.length;u++)a=s[u],i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);h&&h(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},o=[];function a(e){return s.p+"contents/js/"+({highlight:"highlight",marked:"marked"}[e]||e)+"."+{highlight:"ac4e1f6e",marked:"21d960dd"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=i[e]=[t,r]});t.push(n[2]=r);var o,c=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=a(e),o=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");a.type=r,a.request=o,n[1](a)}i[e]=void 0}};var u=setTimeout(function(){o({type:"timeout",target:l})},12e4);l.onerror=l.onload=o,c.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/@/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var h=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"099b":function(e,t,n){"use strict";var r=n("479e"),i=n.n(r);i.a},"2a03":function(e,t,n){"use strict";var r=n("90c2"),i=n.n(r);i.a},"3f88":function(e,t,n){},"479e":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),i=n("2f62"),o=n("bc3a"),a=n.n(o);a.a.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),a.a.interceptors.response.use(function(e){return e.data},function(e){return e.response,Promise.reject(e)});var s=a.a,c=n("2a21"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],h={name:"app"},f=h,d=(n("2a03"),n("2877")),p=Object(d["a"])(f,l,u,!1,null,"56a9c75a",null);p.options.__file="App.vue";var m=p.exports,v=n("8c4f"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main-app"},[n("div",{staticClass:"file-list-box"},[n("header",[n("h1",[n("span",{on:{click:function(t){e.getFiles_c("../",t)}}},[e._v(e._s(e.title))])]),n("VBreadcrumb",{ref:"vbreadcrumb",on:{sendBreadCrumbEvt:e.emitBreadCrumbEvt}})],1),n("main",[n("aside",[n("ul",{staticClass:"file-list",on:{scroll:function(t){e.listScroll(t)}}},e._l(e.files,function(t,r){return n("li",{key:t.file,class:t.classes},[t.isDir?t.isDir?n("svg",{attrs:{"aria-hidden":"true",version:"1.1",viewBox:"0 0 14 16"}},[n("path",{attrs:{d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}})]):e._e():n("svg",{attrs:{"aria-hidden":"true",version:"1.1",viewBox:"0 0 12 16"}},[n("path",{attrs:{d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}})]),n("div",{on:{click:[function(n){e.goFilePath(r,t,n)},function(n){if(!n.shiftKey)return null;n.preventDefault(),e.askServerOpenDir(t)}],contextmenu:function(n){n.preventDefault(),e.rightMenu(t,n)}}},[e._v(e._s(t.file))])])}))]),n("article",{staticClass:"article-box"},[n("VCode",{directives:[{name:"show",rawName:"v-show",value:"code"===e.fileType,expression:"fileType === 'code'"}],ref:"code",attrs:{data:e.code,option:e.codeOption}}),"markdown"===e.fileType?n("div",{staticClass:"readme-box",domProps:{innerHTML:e._s(e.markdownInner)}}):"img"===e.fileType?n("div",{staticClass:"img-box"},[n("figure",{style:e.imgStyle})]):e._e()],1)]),n("footer",[n("p",{staticClass:"folder-info"},[e._v("共有 "+e._s(e.files.length)+" 个文件")]),n("ul",{staticClass:"current-file-info"},[e.currentFile?[n("li",{staticClass:"path",on:{click:function(t){e.askServerOpenDir(e.currentFile)}}},[e._v(e._s(e.currentFile.path))]),n("li",{staticClass:"size"},[e._v(e._s(e._f("fileSize")(e.currentFile.stats.size)))]),n("li",{staticClass:"extname"},[e._v(e._s(e.currentFile.extname.slice(1).toUpperCase()))])]:e._e(),n("li",{staticClass:"face-box"},[n("a",{attrs:{href:"https://github.com/ektx/iServer",title:e.faceInfo,target:"_blank"}},[e.showFace?n("svg",{staticClass:"warn-ico",attrs:{viewBox:"0 0 1024 1024"}},[n("path",{attrs:{d:"M540.5696 161.28c-193.67936 0-350.72 157.02016-350.72 350.72s157.04064 350.72 350.72 350.72c193.72032 0 350.72-157.02016 350.72-350.72S734.28992 161.28 540.5696 161.28z m129.4336 233.92256a50.23744 50.23744 0 1 1 0 100.49536 50.23744 50.23744 0 0 1 0-100.49536z m-258.88768 0a50.23744 50.23744 0 1 1 0 100.49536 50.23744 50.23744 0 0 1 0-100.49536zM721.92 697.38496a30.72 30.72 0 0 1-42.72128-7.90528 168.28416 168.28416 0 0 0-138.6496-73.03168c-55.296 0-107.1104 27.29984-138.60864 73.03168a30.72 30.72 0 1 1-50.60608-34.85696 229.7856 229.7856 0 0 1 189.19424-99.6352c75.5712 0 146.3296 37.25312 189.25568 99.65568a30.69952 30.69952 0 0 1-7.86432 42.74176z"}})]):e._e(),e.showFace?e._e():n("svg",{staticClass:"normal-ico",attrs:{viewBox:"0 0 1024 1024"}},[n("path",{attrs:{d:"M540.5696 161.28c-193.67936 0-350.72 157.02016-350.72 350.72s157.04064 350.72 350.72 350.72c193.72032 0 350.72-157.02016 350.72-350.72s-156.99968-350.72-350.72-350.72z m129.4336 233.92256a50.23744 50.23744 0 1 1 0 100.49536 50.23744 50.23744 0 0 1 0-100.49536z m-258.88768 0a50.23744 50.23744 0 1 1 0 100.49536 50.23744 50.23744 0 0 1 0-100.49536z m318.68928 238.73536a229.84704 229.84704 0 0 1-189.2352 99.6352 229.70368 229.70368 0 0 1-189.2352-99.65568 30.72 30.72 0 1 1 50.62656-34.816c31.45728 45.73184 83.29216 73.03168 138.62912 73.03168s107.13088-27.29984 138.6496-73.03168a30.72 30.72 0 0 1 42.72128-7.8848c13.9264 9.6256 17.44896 28.73344 7.84384 42.72128z"}})])])])],2)])]),n("VContextmenus"),n("OverLayer",{ref:"overlayermod"})],1)},b=[],w=(n("14b9"),n("f559"),n("96cf"),n("3040")),x=(n("ac6a"),n("55dd"),n("a481"),n("aef6"),n("28a5"),n("49d5")),y=n.n(x),O=n("b6e5"),C=n("ad9b"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"show-layer"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"over-layer",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.show=!e.show}}},[n("transition",{attrs:{name:"show-qrcode"}},[n("section",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"ask-link-qrcode-mod"},[n("div",{attrs:{id:"ask-link-qrcode-box"}},[n("img",{attrs:{src:e.QRBox.img}})]),n("input",{attrs:{type:"text",readonly:""},domProps:{value:e.QRBox.text}})])])],1)])},k=[],j=n("d055"),S=n.n(j),F={name:"overlayer",data:function(){return{show:!1,QRBox:{img:null,text:""}}},methods:{generateQRCode:function(e,t){var n=this;this.show=e,this.QRBox.text=t,S.a.toDataURL(t,{width:180*window.devicePixelRatio,margin:0}).then(function(e){n.QRBox.img=e}).catch(function(e){console.error(e)})}}},T=F,B=(n("099b"),Object(d["a"])(T,_,k,!1,null,"2921b41b",null));B.options.__file="index.vue";var R=B.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-code-moirror-box"})},E=[],V=(n("f751"),n("6bde")),$=(n("efe0"),n("56b3")),M=n.n($),P=(n("f9d4"),n("d69f"),n("d5e0"),n("693d"),n("7b00"),n("a7be"),n("0109"),{name:"VCodeMirror",props:{data:{style:String,default:""},option:{style:Object}},data:function(){return{codeBox:"",myOption:{theme:"dracula"}}},watch:{data:function(e){"object"===Object(V["a"])(e)&&(e=JSON.stringify(e,"","\t")),this.codeBox.setValue(e)},option:{handler:function(e,t){for(var n in e)e[n]!=this.myOption[n]&&(this.codeBox.setOption(n,e[n]),this.myOption[n]=e[n])},deep:!0}},mounted:function(){this.myOption=Object.assign(this.myOption,this.option),this.codeBox=M()(this.$el,this.myOption)},methods:{}}),I=P,L=(n("7475"),Object(d["a"])(I,z,E,!1,null,"4a2e7448",null));L.options.__file="index.vue";var D=L.exports,H={name:"home",components:{VBreadcrumb:O["a"],VContextmenus:C["a"],OverLayer:R,VCode:D},data:function(){return{title:"",files:[],currentFile:null,onServer:!0,fileType:"text",markdownInner:"",code:"",codeOption:{lineNumbers:!0,readOnly:!0,mode:""},imgStyle:{},articleEle:{},articleBCR:{},showFace:!1,faceInfo:"v 7.2.0",version:"7.2.0",scrollObj:{}}},created:function(){var e=this;this.refreshFilesList(location.pathname),history.pushState?window.addEventListener("popstate",function(t){e.$route.path!==location.pathname&&e.refreshFilesList(e.$route.path)},!1):console.warn("您的浏览器不支持 History API，请升级您的浏览器！")},filters:{fileSize:function(e){return y()(e)}},watch:{currentFile:function(e,t){t&&t.classes&&(t.classes=[]),e.classes=["current"]}},mounted:function(){localStorage.scrollObj&&(this.scrollObj=JSON.parse(localStorage.scrollObj)),this.articleEle=this.$el.querySelector(".article-box"),this.getNewVersion()},methods:{getFiles_c:function(e,t){var n="";if(t.shiftKey)return this.askServerOpenDir(e);n="../"===e?"".concat(location.pathname.split("/").slice(0,-2).join("/")):location.pathname+e.file,this.refreshFilesList(n),this.$refs.vbreadcrumb.update()},refreshFilesList:function(e){var t=this;e=e.endsWith("/")?e:"".concat(e,"/");var n=decodeURI(e).split("/").slice(-2).shift();this.$router.push(e),this.title=n||"iServer",document.title=this.title,fetch("/api".concat(e)).then(function(e){return e.json()}).then(function(e){if(t.files=t.formatFileList(e.data),t.onServer=e.server,location.href in t.scrollObj){var n=t.scrollObj[location.href];t.$nextTick(function(){t.$el.querySelector(".file-list").scrollTop=n})}}).catch(function(e){console.error(e)})},emitBreadCrumbEvt:function(e){this.refreshFilesList(e.url)},askServerOpenDir:function(e){var t=e.path;e.isDir||(t=t.replace(e.file,"")),this.axios({url:"/api/opendir",method:"POST",data:{path:t,name:e.file}}).then(function(e){console.log(e)})},rightMenu:function(e,t){var n=this,r={el:e,data:[{title:"下载",disabled:!0}],evt:t};this.currentFile=e,this.onServer&&r.data.unshift({title:"在系统中打开",evt:function(){n.askServerOpenDir(e),n.$store.commit("setContextmenu",{show:!1})}},{title:"复制当前路径",evt:function(){if(navigator.clipboard)navigator.clipboard.writeText(e.path).then(function(){console.log("Text copied to clipboard:",e.path)}).catch(function(e){console.error("Could not copy text: ".concat(e))});else{var t=document.createElement("input");document.body.appendChild(t),t.value=e.path,t.focus(),t.select();var r=document.execCommand("copy");"unsuccessful"===r?console.error("Faild to copy path"):document.body.removeChild(t)}n.$store.commit("setContextmenu",{show:!1})}},{type:"separator"}),r.data.unshift({title:"二维码访问",evt:function(t,r){var i=function(t){var r=decodeURI(t+e.file);n.$refs.overlayermod.generateQRCode(!0,r)};"localhost"===location.hostname?fetch("/get-iserver-ip").then(function(e){return e.json()}).then(function(e){i(location.href.replace("localhost",e.mes.IPv4.public))}).catch(function(e){console.error(e)}):i(location.href),n.$store.commit("setContextmenu",{show:!1})}},{type:"separator"}),n.$store.commit("setContextmenu",r)},sortArr:function(e){return e.sort(function(e,t){return new Intl.Collator(navigator.language,{caseFirst:"lower"}).compare(e.file,t.file)})},formatFileList:function(e){var t=this,n=[],r=[];return e.forEach(function(e){e.isDir?r.push(e):(n.push(e),/readme\.(md|markdown)/i.test(e.file)&&(e.classes=["current"],t.currentFile=e,t.catFileInner(e)))}),r=this.sortArr(r),n=this.sortArr(n),r.concat(n)},catFileInner:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t){var r,i,o,a,s,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),r="",e.next=4,n.e("marked").then(n.t.bind(null,"0e54",7));case 4:if(i=e.sent.default,o=new i.Renderer,a=[],s={},o.heading=function(e,t){t in s?s[t]+=1:s[t]=1;var n=e+"-"+s[t];return a.push({level:t,slug:n,text:e}),"<h".concat(t,' id="').concat(n,'">').concat(e,'<a href="#').concat(n,'" class="anchor"></a></h').concat(t,">")},o.link=function(e,t,n){var r="",i="";return e.startsWith("http")&&(r=' target="_blank" '),n.endsWith("  ")&&(i="<br/>"),'<a href="'.concat(e,'" ').concat(r,">").concat(n,"</a>").concat(i)},o.paragraph=function(e){var t="";return t=/\[toc\]/i.test(e)?e:e.endsWith("  ")?"".concat(e,"<br/>"):"<p>".concat(e,"</p>"),t},r=this.getFileMode(t),"boolean"!==typeof r||r){e.next=14;break}return e.abrupt("return");case 14:this.axios({url:location.href+t.file,method:"GET"}).then(function(e){if("markdown"===r){var t=i(e,{renderer:o}),s="",l=0;a.forEach(function(e){l<e.level?s+="<ul>":e.level===l?s+="</li>":e.level<l&&(s+="</li></ul>".repeat(l-e.level)),s+='<li><a href="#'.concat(e.slug,'">').concat(e.text,"</a>"),l=e.level}),s+="</li></ul>".repeat(l),c.markdownInner=t.replace(/\[toc\]/i,s),c.$nextTick(Object(w["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=document.querySelectorAll("pre code"),e.next=3,n.e("highlight").then(n.t.bind(null,"1487",7));case 3:r=e.sent,t.forEach(function(e){r.highlightBlock(e)});case 5:case"end":return e.stop()}},e,this)})))}else c.code=e,c.codeOption.mode=r});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),goFilePath:function(e,t,n){this.currentFile=t,t.isDir?(localStorage.scrollObj=JSON.stringify(this.scrollObj),this.getFiles_c(t,n)):this.catFileInner(t)},getFileMode:function(e){var t=e.extname,n=!1;return/\.png|jpg|gif/i.test(t)?(this.fileType="img",this.setImgStyle()):/\.(html|htm|ejs|xml)/i.test(t)?(this.fileType="code",window.open("./".concat(e.file)),n="text/html"):/\.(md|markdown)/i.test(t)?(this.fileType="markdown",n="markdown"):/\.(js|jsx|json)/i.test(t)?(this.fileType="code",n="javascript"):/\.(css|less|scss|sass|style)/i.test(t)?(this.fileType="code",n="css"):/\.vue/i.test(t)?(this.fileType="code",n="text/x-vue"):/\.vue/i.test(t)?(this.fileType="code",n="text/x-vue"):".gitignore"===e.file?(this.fileType="code",n="bash"):(this.fileType="",window.open("./".concat(e.file)),n=!1),n},setImgStyle:function(){var e=this;this.articleBCR=this.articleEle.getBoundingClientRect();var t=new Image,n="./".concat(this.currentFile.file);t.onload=function(){var r=t.width,i=t.height;(i>e.articleBCR.height||r>e.articleBCR.width)&&(i>r?(r/=i/e.articleBCR.height,i=e.articleBCR.height):(i/=r/e.articleBCR.width,r=e.articleBCR.width)),e.imgStyle={background:"url(".concat(n,") 50% 50% / 100% 100%"),width:"".concat(r,"px"),height:"".concat(i,"px")}},t.onerror=function(){console.warn("图片处理时出现错误")},t.src=n},getNewVersion:function(){var e=this;navigator.onLine&&this.axios({url:"https://raw.githubusercontent.com/ektx/iServer/master/package.json",methods:"GET"}).then(function(t){t.version!==e.version&&(e.showFace=!0,e.faceInfo="您需要升级，目前版本是: v".concat(t.version))})},listScroll:function(e){this.scrollObj[location.href]=e.target.scrollTop}}},N=H,q=(n("d13f"),n("c861"),Object(d["a"])(N,g,b,!1,null,null,null));q.options.__file="index.vue";var A=q.exports;r["a"].use(v["a"]);var Q=new v["a"]({mode:"history",routes:[{path:"*",name:"home",component:A}]});r["a"].config.productionTip=!1,r["a"].use(i["a"]),r["a"].prototype.axios=s;var J=new i["a"].Store({state:{},mutations:{},modules:{VContextmenu:c["a"]}});new r["a"]({router:Q,store:J,render:function(e){return e(m)}}).$mount("#app")},"6d73":function(e,t,n){},7475:function(e,t,n){"use strict";var r=n("c8cf"),i=n.n(r);i.a},"90c2":function(e,t,n){},c861:function(e,t,n){"use strict";var r=n("6d73"),i=n.n(r);i.a},c8cf:function(e,t,n){},d13f:function(e,t,n){"use strict";var r=n("3f88"),i=n.n(r);i.a}});