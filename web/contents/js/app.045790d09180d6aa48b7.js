webpackJsonp([1],{"4/hK":function(e,t){},"40eL":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],ref:"contextMenu"},[n("VContextMenusBody",{ref:"contextmenu",attrs:{menus:e.menus}})],1)},r=[],s={render:i,staticRenderFns:r};t.a=s},"8sUU":function(e,t){},AaDW:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"show-layer"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"over-layer",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.show=!e.show}}},[n("transition",{attrs:{name:"show-qrcode"}},[n("section",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"ask-link-qrcode-mod"},[n("div",{attrs:{id:"ask-link-qrcode-box"}},[n("img",{attrs:{src:e.QRBox.img}})]),e._v(" "),n("input",{attrs:{type:"text",readonly:""},domProps:{value:e.QRBox.text}})])])],1)])},r=[],s={render:i,staticRenderFns:r};t.a=s},"DS+Y":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main-app"},[n("div",{staticClass:"file-list-box"},[n("header",[n("h1",[n("span",{on:{click:function(t){e.getFiles_c("../",t)}}},[e._v(e._s(e.title))])]),e._v(" "),n("VBreadcrumb",{ref:"vbreadcrumb",on:{sendBreadCrumbEvt:e.emitBreadCrumbEvt}})],1),e._v(" "),n("main",[n("aside",[n("ul",{staticClass:"file-list",on:{scroll:function(t){e.listScroll(t)}}},e._l(e.files,function(t,i){return n("li",{key:t.file,class:t.classes},[t.isDir?t.isDir?n("svg",{attrs:{"aria-hidden":"true",version:"1.1",viewBox:"0 0 14 16"}},[n("path",{attrs:{d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}})]):e._e():n("svg",{attrs:{"aria-hidden":"true",version:"1.1",viewBox:"0 0 12 16"}},[n("path",{attrs:{d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}})]),e._v(" "),n("div",{on:{click:[function(n){e.goFilePath(i,t,n)},function(n){if(!n.shiftKey)return null;n.preventDefault(),e.askServerOpenDir(t)}],contextmenu:function(n){n.preventDefault(),e.rightMenu(t,n)}}},[e._v(e._s(t.file))])])}))]),e._v(" "),n("article",{staticClass:"article-box"},[n("VCode",{directives:[{name:"show",rawName:"v-show",value:"code"===e.fileType,expression:"fileType === 'code'"}],ref:"code",attrs:{data:e.code,option:e.codeOption}}),e._v(" "),"markdown"===e.fileType?n("div",{staticClass:"readme-box",domProps:{innerHTML:e._s(e.markdownInner)}}):"img"===e.fileType?n("div",{staticClass:"img-box"},[n("figure",{style:e.imgStyle})]):e._e()],1)]),e._v(" "),n("footer",[n("p",{staticClass:"folder-info"},[e._v("共有 "+e._s(e.files.length)+" 个文件")]),e._v(" "),n("ul",{staticClass:"current-file-info"},[e.currentFile?[n("li",{staticClass:"path",on:{click:function(t){e.askServerOpenDir(e.currentFile)}}},[e._v(e._s(e.currentFile.path))]),e._v(" "),n("li",{staticClass:"size"},[e._v(e._s(e._f("fileSize")(e.currentFile.stats.size)))]),e._v(" "),n("li",{staticClass:"extname"},[e._v(e._s(e.currentFile.extname.slice(1).toUpperCase()))])]:e._e(),e._v(" "),n("li",{staticClass:"face-box"},[n("a",{attrs:{href:"https://github.com/ektx/iServer",title:e.faceInfo,target:"_blank"}},[e.showFace?n("svg",{staticClass:"warn-ico",attrs:{viewBox:"0 0 1024 1024"}},[n("path",{attrs:{d:"M540.5696 161.28c-193.67936 0-350.72 157.02016-350.72 350.72s157.04064 350.72 350.72 350.72c193.72032 0 350.72-157.02016 350.72-350.72S734.28992 161.28 540.5696 161.28z m129.4336 233.92256a50.23744 50.23744 0 1 1 0 100.49536 50.23744 50.23744 0 0 1 0-100.49536z m-258.88768 0a50.23744 50.23744 0 1 1 0 100.49536 50.23744 50.23744 0 0 1 0-100.49536zM721.92 697.38496a30.72 30.72 0 0 1-42.72128-7.90528 168.28416 168.28416 0 0 0-138.6496-73.03168c-55.296 0-107.1104 27.29984-138.60864 73.03168a30.72 30.72 0 1 1-50.60608-34.85696 229.7856 229.7856 0 0 1 189.19424-99.6352c75.5712 0 146.3296 37.25312 189.25568 99.65568a30.69952 30.69952 0 0 1-7.86432 42.74176z"}})]):e._e(),e._v(" "),e.showFace?e._e():n("svg",{staticClass:"normal-ico",attrs:{viewBox:"0 0 1024 1024"}},[n("path",{attrs:{d:"M540.5696 161.28c-193.67936 0-350.72 157.02016-350.72 350.72s157.04064 350.72 350.72 350.72c193.72032 0 350.72-157.02016 350.72-350.72s-156.99968-350.72-350.72-350.72z m129.4336 233.92256a50.23744 50.23744 0 1 1 0 100.49536 50.23744 50.23744 0 0 1 0-100.49536z m-258.88768 0a50.23744 50.23744 0 1 1 0 100.49536 50.23744 50.23744 0 0 1 0-100.49536z m318.68928 238.73536a229.84704 229.84704 0 0 1-189.2352 99.6352 229.70368 229.70368 0 0 1-189.2352-99.65568 30.72 30.72 0 1 1 50.62656-34.816c31.45728 45.73184 83.29216 73.03168 138.62912 73.03168s107.13088-27.29984 138.6496-73.03168a30.72 30.72 0 0 1 42.72128-7.8848c13.9264 9.6256 17.44896 28.73344 7.84384 42.72128z"}})])])])],2)])]),e._v(" "),n("VContextmenus"),e._v(" "),n("OverLayer",{ref:"overlayermod"})],1)},r=[],s={render:i,staticRenderFns:r};t.a=s},FODL:function(e,t,n){"use strict";function i(e){n("V/wl")}var r=n("gML9"),s=n("TykF"),o=n("VU/8"),a=i,c=o(r.a,s.a,!1,a,null,null);t.a=c.exports},FP3a:function(e,t,n){"use strict";function i(e){n("KVXv"),n("pvPR")}var r=n("gnEj"),s=n("DS+Y"),o=n("VU/8"),a=i,c=o(r.a,s.a,!1,a,null,null);t.a=c.exports},Jrxc:function(e,t,n){"use strict";function i(e){n("m4iY")}var r=n("eu0X"),s=n("fmAe"),o=n("VU/8"),a=i,c=o(r.a,s.a,!1,a,"data-v-4c6e22d8",null);t.a=c.exports},KVXv:function(e,t){},M93x:function(e,t,n){"use strict";function i(e){n("Mhvj")}var r=n("xJD8"),s=n("T2z1"),o=n("VU/8"),a=i,c=o(r.a,s.a,!1,a,"data-v-8cccf048",null);t.a=c.exports},Mhvj:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r=n("NYxO"),s=n("Tarh"),o=n("fLmV"),a=n("M93x"),c=n("YaEn");i.a.config.productionTip=!1,i.a.use(r.a),i.a.prototype.axios=s.a;var l=new r.a.Store({state:{},mutations:{},modules:{VContextmenu:o.a}});new i.a({el:"#app",router:c.a,store:l,template:"<App/>",components:{App:a.a}})},OOId:function(e,t,n){"use strict";function i(e){n("pOLC")}var r=n("jY+r"),s=n("AaDW"),o=n("VU/8"),a=i,c=o(r.a,s.a,!1,a,"data-v-6c84545f",null);t.a=c.exports},T2z1:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],s={render:i,staticRenderFns:r};t.a=s},Tarh:function(e,t,n){"use strict";var i=n("//Fk"),r=n.n(i),s=n("mtWM"),o=n.n(s);o.a.interceptors.request.use(function(e){return e.url=e.url.replace(":8080",":8080/api"),e},function(e){return r.a.reject(e)}),o.a.interceptors.response.use(function(e){return e.data},function(e){return e.response,r.a.reject(e)}),t.a=o.a},TykF:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"v-breadcrumb-com"},[e.hasEvt?[n("a",{attrs:{href:"/"},on:{click:function(t){t.preventDefault(),e.breadcrumb_c("/")}}},[e._v(".")]),e._v(" "),e._l(e.hrefArr,function(t,i){return n("a",{key:i,attrs:{href:t.path},on:{click:function(n){n.preventDefault(),e.breadcrumb_c(t.path)}}},[e._v(e._s(t.name))])})]:[n("a",{attrs:{href:"/"}},[e._v(".")]),e._v(" "),e._l(e.hrefArr,function(t){return n("a",{key:t,attrs:{href:t.path}},[e._v(e._s(t.name))])})]],2)},r=[],s={render:i,staticRenderFns:r};t.a=s},"V/wl":function(e,t){},YaEn:function(e,t,n){"use strict";var i=n("7+uW"),r=n("/ocq"),s=n("FP3a");i.a.use(r.a),t.a=new r.a({mode:"history",routes:[{path:"*",name:"home",component:s.a}]})},b38w:function(e,t,n){"use strict";function i(e){n("skWX")}var r=n("kyfb"),s=n("e+28"),o=n("VU/8"),a=i,c=o(r.a,s.a,!1,a,"data-v-351b7580",null);t.a=c.exports},"e+28":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"contextmenu-body-mod"},[e.menus.state&&e.menus.state.show?[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.menus.state.show,expression:"menus.state.show"}],style:{top:e.menus.state.position.top+"px",left:e.menus.state.position.left+"px"}},e._l(e.menus.inner,function(t,i){return n("li",["title"in t?n("div",{key:i,class:{noEvt:t.disabled},on:{mouseover:function(t){e.contextmenuMouseOverLazy(i,t)},click:function(n){e.contextmenuClick(i,n,t.evt)}}},[e._v("\n\t\t\t\t"+e._s(t.title)+"\n\n\t\t\t\t"),t.children?n("i"):e._e()]):"type"in t?n("div",{key:i,staticClass:"separator"}):e._e(),e._v(" "),t.children?[n("v-contextmenus-body",{attrs:{menus:t.children}})]:e._e()],2)}))]:e._e()],2)},r=[],s={render:i,staticRenderFns:r};t.a=s},eu0X:function(e,t,n){"use strict";var i=n("woOf"),r=n.n(i),s=n("mvHQ"),o=n.n(s),a=n("pFYg"),c=n.n(a),l=n("tx0o"),u=(n.n(l),n("8U58")),f=n.n(u),h=n("5IAE"),v=(n.n(h),n("8Nur")),d=(n.n(v),n("ezqs")),m=(n.n(d),n("/9hD")),p=(n.n(m),n("puAj")),x=(n.n(p),n("4/hK")),w=(n.n(x),n("8sUU"));n.n(w);t.a={name:"VCodeMirror",props:{data:{style:String,default:""},option:{style:Object}},data:function(){return{codeBox:"",myOption:{theme:"dracula"}}},watch:{data:function(e){"object"===(void 0===e?"undefined":c()(e))&&(e=o()(e,"","\t")),this.codeBox.setValue(e)},option:{handler:function(e,t){for(var n in e)e[n]!=this.myOption[n]&&(this.codeBox.setOption(n,e[n]),this.myOption[n]=e[n])},deep:!0}},mounted:function(){this.myOption=r()(this.myOption,this.option),this.codeBox=f()(this.$el,this.myOption)},methods:{}}},fmAe:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"v-code-moirror-box"})},r=[],s={render:i,staticRenderFns:r};t.a=s},gnEj:function(e,t,n){"use strict";var i=n("mvHQ"),r=n.n(i),s=n("H52G"),o=n.n(s),a=n("FODL"),c=n("om4H"),l=n("OOId"),u=n("EFqf"),f=n.n(u),h=n("V8mf"),v=n.n(h),d=n("Jrxc");t.a={name:"home",components:{VBreadcrumb:a.a,VContextmenus:c.a,OverLayer:l.a,VCode:d.a},data:function(){return{title:"",files:[],currentFile:null,onServer:!0,fileType:"text",markdownInner:"",code:"",codeOption:{lineNumbers:!0,readOnly:!0,mode:""},imgStyle:{},articleEle:{},articleBCR:{},showFace:!1,faceInfo:"v 7.1.0",version:"7.1.0",scrollObj:{}}},created:function(){var e=this;this.refreshFilesList(location.pathname),history.pushState?window.addEventListener("popstate",function(t){e.refreshFilesList(location.pathname)},!1):console.warn("您的浏览器不支持 History API，请升级您的浏览器！")},filters:{fileSize:function(e){return o()(e)}},mounted:function(){localStorage.scrollObj&&(this.scrollObj=JSON.parse(localStorage.scrollObj)),this.articleEle=this.$el.querySelector(".article-box"),this.getNewVersion()},methods:{getFiles_c:function(e,t){var n="";if(t.shiftKey)return void this.askServerOpenDir(e);n="../"===e?""+location.pathname.split("/").slice(0,-2).join("/"):location.pathname+e.file,this.refreshFilesList(n),this.$refs.vbreadcrumb.update()},refreshFilesList:function(e){var t=this;e=e.endsWith("/")?e:e+"/";var n=decodeURI(e).split("/").slice(-2).shift();this.$router.push(e),this.title=n||"iServer",document.title=this.title,fetch("/api"+e).then(function(e){return e.json()}).then(function(e){if(t.files=t.formatFileList(e.data),t.onServer=e.server,location.href in t.scrollObj){var n=t.scrollObj[location.href];t.$nextTick(function(){t.$el.querySelector(".file-list").scrollTop=n})}}).catch(function(e){console.error(e)})},emitBreadCrumbEvt:function(e){this.refreshFilesList(e.url)},askServerOpenDir:function(e){var t=e.path;e.isDir||(t=t.replace(e.file,"")),this.axios({url:"/api/opendir",method:"POST",data:{path:t,name:e.file}}).then(function(e){console.log(e)})},rightMenu:function(e,t){var n=this,i={el:e,data:[{title:"下载",disabled:!0}],evt:t};this.onServer&&i.data.unshift({title:"在系统中打开",evt:function(){n.askServerOpenDir(e),n.$store.commit("setContextmenu",{show:!1})}},{type:"separator"}),i.data.unshift({title:"二维码访问",evt:function(t,i){var r=function(t){var i=decodeURI(t+e.file);n.$refs.overlayermod.generateQRCode(!0,i)};"localhost"===location.hostname?fetch("/get-iserver-ip").then(function(e){return e.json()}).then(function(e){r(location.href.replace("localhost",e.mes.IPv4.public))}).catch(function(e){console.error(e)}):r(location.href),n.$store.commit("setContextmenu",{show:!1})}},{type:"separator"}),n.$store.commit("setContextmenu",i)},sortArr:function(e){return e.sort(function(e,t){return new Intl.Collator(navigator.language,{caseFirst:"lower"}).compare(e.file,t.file)})},formatFileList:function(e){var t=this,n=[],i=[];return e.forEach(function(e){e.isDir?i.push(e):(n.push(e),/readme\.(md|markdown)/i.test(e.file)&&(e.classes=["current"],t.currentFile=e,t.catFileInner(e)))}),i=this.sortArr(i),n=this.sortArr(n),i.concat(n)},catFileInner:function(e){var t=this,n="";("boolean"!=typeof(n=this.getFileMode(e))||n)&&this.axios({url:location.href+e.file,method:"GET"}).then(function(e){"markdown"===n?(t.markdownInner=f()(e),t.$nextTick(function(){document.querySelectorAll("pre code").forEach(function(e){v.a.highlightBlock(e)})})):(t.code=e,t.codeOption.mode=n)})},goFilePath:function(e,t,n){t.isDir?(localStorage.scrollObj=r()(this.scrollObj),this.getFiles_c(t,n)):(this.currentFile&&(this.currentFile.classes=[]),t.classes=["current"],this.currentFile=t,this.catFileInner(t))},getFileMode:function(e){var t=e.extname,n=!1;return/\.png|jpg|gif/i.test(t)?(console.log("is img"),this.fileType="img",this.setImgStyle()):/\.(html|htm|ejs|xml)/i.test(t)?(this.fileType="code",window.open("./"+e.file),n="text/html"):/\.(md|markdown)/i.test(t)?(this.fileType="markdown",n="markdown"):/\.(js|jsx|json)/i.test(t)?(this.fileType="code",n="javascript"):/\.(css|less|scss|sass|style)/i.test(t)?(this.fileType="code",n="css"):/\.vue/i.test(t)?(this.fileType="code",n="text/x-vue"):/\.vue/i.test(t)?(this.fileType="code",n="text/x-vue"):".gitignore"===e.file?(this.fileType="code",n="bash"):(this.fileType="",window.open("./"+e.file),n=!1),n},setImgStyle:function(){var e=this;this.articleBCR=this.articleEle.getBoundingClientRect();var t=new Image,n="./"+this.currentFile.file;t.onload=function(){var i=t.width,r=t.height;(r>e.articleBCR.height||i>e.articleBCR.width)&&(r>i?(i/=r/e.articleBCR.height,r=e.articleBCR.height):(r/=i/e.articleBCR.width,i=e.articleBCR.width)),e.imgStyle={background:"url("+n+") 50% 50% / 100% 100%",width:i+"px",height:r+"px"}},t.onerror=function(){console.warn("图片处理时出现错误")},t.src=n},getNewVersion:function(){var e=this;navigator.onLine&&this.axios({url:"https://raw.githubusercontent.com/ektx/iServer/master/package.json",methods:"GET"}).then(function(t){t.version!==e.version&&(e.showFace=!0,e.faceInfo="您需要升级，目前版本是: v"+t.version)})},listScroll:function(e){this.scrollObj[location.href]=e.target.scrollTop}}}},"jY+r":function(e,t,n){"use strict";var i=n("yti/");t.a=i.a},m4iY:function(e,t){},om4H:function(e,t,n){"use strict";var i=n("fZRU"),r=n("40eL"),s=n("VU/8"),o=s(i.a,r.a,!1,null,null,null);t.a=o.exports},pOLC:function(e,t){},pvPR:function(e,t){},skWX:function(e,t){},tx0o:function(e,t){},xJD8:function(e,t,n){"use strict";t.a={name:"app"}},"yti/":function(e,t,n){"use strict";var i=n("71e1"),r=n.n(i);t.a={name:"overlayer",data:function(){return{show:!1,QRBox:{img:null,text:""}}},methods:{generateQRCode:function(e,t){var n=this;this.show=e,this.QRBox.text=t,r.a.toDataURL(t,{width:180*window.devicePixelRatio,margin:0}).then(function(e){n.QRBox.img=e}).catch(function(e){console.error(e)})}}}}},["NHnr"]);