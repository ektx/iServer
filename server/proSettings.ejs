<!DOCTYPE html>
<html lang="zh">
	<%- include('parts/head', {host: host, title: usrInfo.usr, css: ['/server/css/setting.css']}) %>
<body>
	<%- include('parts/header', {host: host, usr: usrInfo, title: '设置-'+title, titurl: titurl, project: project }) %>

	<% isGit = project.type === 'git' %>

	<section class="main-body">

		<section class="content">

			<aside class="pro-aside-set">
				<ul>
					<li data-form="base">基础设置</li>

					<% if (isGit) { %>
					<li data-form="git">Git设置</li>
					<% } %>
					<li data-form="del">删除项目</li>
				</ul>
			</aside>

			<div class="pro-body-set">
				<form id="base" class="upload-form" method="post" enctype="multipart/form-data" action="/updateProSettings" style="display: none;">

					<dl>
						<dt>项目名称</dt>
						<dd>
							<input type="hidden" name="oldName" value="<%= title %>">
							<input type="text" name="proName" value="<%= title %>" required>
							<span class="err-info"></span>
						</dd>
					</dl>
					
					<% if (!proStatus.isOpen) {%>
					<dl id="private-box">
						<dt>隐私</dt>
						<dd>
							<label><input type="radio" name="private" value="false">公开 所有访问项目者匀可见</label>			
							<br />
							<label><input type="radio" name="private" checked="" value="true">个人 只有我自己可以查看</label>			
							<span class="err-info"></span>
						</dd>
					</dl>
					<% }%>

					<dl>
						<dd>
							<button class="btn middle-btn green-btn" type="submit">
								<span class="ico"></span>
								<span class="name">保存修改</span>
							</button>
						</dd>
					</dl>
				</form>
				
				<% if (isGit) { %>
				<form id="git" class="upload-form" method="post" action="/updateProGitRemote" style="display: none">
					<dl>
						<dt>Git 地址更新</dt>
						<dd>
							<input type="hidden" name="oldName" value="<%= title %>">
							<input type="text" name="proUrl" autocomplete="off" value="<%= project.url %>" required>
							<span class="err-info"></span>
						</dd>
					</dl>
					<dl>
						<dd>
							<button class="btn middle-btn green-btn" type="submit">
								<span class="ico"></span>
								<span class="name">保存</span>
							</button>
						</dd>
					</dl>
				</form>
				<% } %>

				<form id="del" class="upload-form" method="delete" enctype="multipart/form-data" action="/deleteMyPro" style="display: none">

					<dl>
						<dt>删除项目</dt>
						<dd>
							<p>注意,项目删除之后将无法恢复!</p>
							<input type="hidden" name="proOldName" value="<%= title %>">
							<input type="text" name="proName" value="" placeholder="确认项目名称" required sameAs="proOldName" autocomplete="off">
							<span class="err-info"></span>
						</dd>
					</dl>

					<dl>
						<dd>
							<button class="btn middle-btn red-btn" type="submit">
								<span class="ico"></span>
								<span class="name">删除</span>
							</button>
						</dd>
					</dl>
				</form>
			</div>
			
		</section>

	</section>

	<script src="<%= host %>/server/js/jquery-3.1.0.min.js"></script>
	<script src="<%= host %>/server/js/main.js"></script>
	<script src="<%= host %>/server/js/myVerification-0.0.2.js"></script>
	<script src="<%= host %>/server/js/setting.js"></script>
	
</body>
</html>